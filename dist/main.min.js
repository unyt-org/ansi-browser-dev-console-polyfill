let ansi_escape_codes_full_support=!!globalThis.Deno||!!globalThis.process,ansi_escape_codes_basic_support=ansi_escape_codes_full_support||!!globalThis.chrome,is_safari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),requires_console_monsospace_font=is_safari,color_image_esc_seq=/\x1b\[(?:((?:\d+;)*\d+)?m|1337;File=(.*)\x07)/g,multiple_cs=/%c(%c)*/g,COLORS={RED:"#ea2b51",GREEN:"#1eda6d",BLUE:"#0669c1",YELLOW:"#ebb626",MAGENTA:"#c470de",CYAN:"#4fa9e8",BLACK:"#050505",WHITE:"#d2d2d2"},COLORS_LIGHT={RED:"#f8b9c6",GREEN:"#bcf6d4",BLUE:"#97ccfc",YELLOW:"#f9e7b9",MAGENTA:"#e5c1f1",CYAN:"#bbdef6",BLACK:"#6b6b6b",WHITE:"#ffffff"},COLORS_8_BIT=[COLORS.BLACK,COLORS.RED,COLORS.GREEN,COLORS.YELLOW,COLORS.BLUE,COLORS.MAGENTA,COLORS.CYAN,COLORS.WHITE,COLORS_LIGHT.BLACK,COLORS_LIGHT.RED,COLORS_LIGHT.GREEN,COLORS_LIGHT.YELLOW,COLORS_LIGHT.BLUE,COLORS_LIGHT.MAGENTA,COLORS_LIGHT.CYAN,COLORS_LIGHT.WHITE,"#000000","#00005f","#000087","#0000af","#0000d7","#0000ff","#005f00","#005f5f","#005f87","#005faf","#005fd7","#005fff","#008700","#00875f","#008787","#0087af","#0087d7","#0087ff","#00af00","#00af5f","#00af87","#00afaf","#00afd7","#00afff","#00d700","#00d75f","#00d787","#00d7af","#00d7d7","#00d7ff","#00ff00","#00ff5f","#00ff87","#00ffaf","#00ffd7","#00ffff","#5f0000","#5f005f","#5f0087","#5f00af","#5f00d7","#5f00ff","#5f5f00","#5f5f5f","#5f5f87","#5f5faf","#5f5fd7","#5f5fff","#5f8700","#5f875f","#5f8787","#5f87af","#5f87d7","#5f87ff","#5faf00","#5faf5f","#5faf87","#5fafaf","#5fafd7","#5fafff","#5fd700","#5fd75f","#5fd787","#5fd7af","#5fd7d7","#5fd7ff","#5fff00","#5fff5f","#5fff87","#5fffaf","#5fffd7","#5fffff","#870000","#87005f","#870087","#8700af","#8700d7","#8700ff","#875f00","#875f5f","#875f87","#875faf","#875fd7","#875fff","#878700","#87875f","#878787","#8787af","#8787d7","#8787ff","#87af00","#87af5f","#87af87","#87afaf","#87afd7","#87afff","#87d700","#87d75f","#87d787","#87d7af","#87d7d7","#87d7ff","#87ff00","#87ff5f","#87ff87","#87ffaf","#87ffd7","#87ffff","#af0000","#af005f","#af0087","#af00af","#af00d7","#af00ff","#af5f00","#af5f5f","#af5f87","#af5faf","#af5fd7","#af5fff","#af8700","#af875f","#af8787","#af87af","#af87d7","#af87ff","#afaf00","#afaf5f","#afaf87","#afafaf","#afafd7","#afafff","#afd700","#afd75f","#afd787","#afd7af","#afd7d7","#afd7ff","#afff00","#afff5f","#afff87","#afffaf","#afffd7","#afffff","#d70000","#d7005f","#d70087","#d700af","#d700d7","#d700ff","#d75f00","#d75f5f","#d75f87","#d75faf","#d75fd7","#d75fff","#d78700","#d7875f","#d78787","#d787af","#d787d7","#d787ff","#d7af00","#d7af5f","#d7af87","#d7afaf","#d7afd7","#d7afff","#d7d700","#d7d75f","#d7d787","#d7d7af","#d7d7d7","#d7d7ff","#d7ff00","#d7ff5f","#d7ff87","#d7ffaf","#d7ffd7","#d7ffff","#ff0000","#ff005f","#ff0087","#ff00af","#ff00d7","#ff00ff","#ff5f00","#ff5f5f","#ff5f87","#ff5faf","#ff5fd7","#ff5fff","#ff8700","#ff875f","#ff8787","#ff87af","#ff87d7","#ff87ff","#ffaf00","#ffaf5f","#ffaf87","#ffafaf","#ffafd7","#ffafff","#ffd700","#ffd75f","#ffd787","#ffd7af","#ffd7d7","#ffd7ff","#ffff00","#ffff5f","#ffff87","#ffffaf","#ffffd7","#ffffff","#080808","#121212","#1c1c1c","#262626","#303030","#3a3a3a","#444444","#4e4e4e","#585858","#626262","#6c6c6c","#767676","#808080","#8a8a8a","#949494","#9e9e9e","#a8a8a8","#b2b2b2","#bcbcbc","#c6c6c6","#d0d0d0","#dadada","#e4e4e4","#eeeeee"],ESCAPE_SEQUENCES_SET_CSS={1:{"font-weight":"bold"},3:{"font-style":"italic"},5:{"font-weight":"bold"},7:{"-x-invert":"invert"},8:{"-x-conceal":"conceal"},21:{"font-weight":""},23:{"font-style":""},25:{"font-weight":""},30:{color:COLORS.BLACK},31:{color:COLORS.RED},32:{color:COLORS.GREEN},33:{color:COLORS.YELLOW},34:{color:COLORS.BLUE},35:{color:COLORS.MAGENTA},36:{color:COLORS.CYAN},37:{color:COLORS.WHITE},39:{color:"inherit"},90:{color:COLORS_LIGHT.BLACK},91:{color:COLORS_LIGHT.RED},92:{color:COLORS_LIGHT.GREEN},93:{color:COLORS_LIGHT.YELLOW},94:{color:COLORS_LIGHT.BLUE},95:{color:COLORS_LIGHT.MAGENTA},96:{color:COLORS_LIGHT.CYAN},97:{color:COLORS_LIGHT.WHITE},40:{"background-color":COLORS.BLACK},41:{"background-color":COLORS.RED},42:{"background-color":COLORS.GREEN},43:{"background-color":COLORS.YELLOW},44:{"background-color":COLORS.BLUE},45:{"background-color":COLORS.MAGENTA},46:{"background-color":COLORS.CYAN},47:{"background-color":COLORS.WHITE},49:{"background-color":"inherit"},100:{"background-color":COLORS_LIGHT.BLACK},101:{"background-color":COLORS_LIGHT.RED},102:{"background-color":COLORS_LIGHT.GREEN},103:{"background-color":COLORS_LIGHT.YELLOW},104:{"background-color":COLORS_LIGHT.BLUE},105:{"background-color":COLORS_LIGHT.MAGENTA},106:{"background-color":COLORS_LIGHT.CYAN},107:{"background-color":COLORS_LIGHT.WHITE}},ESCAPE_SEQUENCES_APPEND_CSS={4:{"text-decoration":"underline"},9:{"text-decoration":"line-through"},53:{"text-decoration":"overline"}},ESCAPE_SEQUENCES_REMOVE_CSS={24:{"text-decoration":"underline"},29:{"text-decoration":"line-through"},55:{"text-decoration":"overline"},27:{"-x-invert":"invert"},28:{"-x-conceal":"conceal"}};function getDefaultStyle(){return requires_console_monsospace_font?{"font-family":"monospace"}:{}}function parseEscSequence(f,e){var $;if(38==e[0]&&2==e[1])f.color=`rgb(${e[2]},${e[3]},${e[4]})`,e.splice(0,5);else if(48==e[0]&&2==e[1])f["background-color"]=`rgb(${e[2]},${e[3]},${e[4]})`,e.splice(0,5);else if(38==e[0]&&5==e[1])f.color=COLORS_8_BIT[e[2]],e.splice(0,3);else if(48==e[0]&&5==e[1])f["background-color"]=COLORS_8_BIT[e[2]],e.splice(0,5);else if(0==e[0])Object.keys(f).forEach(e=>delete f[e]),Object.assign(f,getDefaultStyle()),e.splice(0,1);else if(e[0]<=107){let o=ESCAPE_SEQUENCES_SET_CSS[e[0]];if(o)Object.assign(f,o);else{let a=ESCAPE_SEQUENCES_APPEND_CSS[e[0]];if(a){let c=Object.keys(a)[0];(null===($=f[c])||void 0===$?void 0:$.includes(a[c]))||(f[c]=f[c]?`${f[c]} ${a[c]}`:a[c])}else{let d=ESCAPE_SEQUENCES_REMOVE_CSS[e[0]];if(d){let r=Object.keys(d)[0];f[r]&&(f[r]=f[r].replace(d[r],""))}}}e.splice(0,1)}}function getImageType(f){let e=atob(f);return e.startsWith("<svg")||e.startsWith("<?xml")?"image/svg+xml":e.startsWith("\x89PNG")?"image/png":e.startsWith("GIF")?"image/gif":e.startsWith("\xff\xd8\xff")?"image/jpeg":void 0}function parseImage(f,e){var $,o,a;let c=e.split(":");if(c.length<2)return"";let d=c[0].split(";"),r={};for(let l of d)if(l.includes("=")){let t=l.split("=");r[t[0]]=t[1].trim()}let n=c.slice(1).join(":"),i=(null===($=r.height)||void 0===$?void 0:$.includes("px"))?parseInt(r.height):150,s=(null===(o=r.width)||void 0===o?void 0:o.includes("px"))?parseInt(r.width):150,O="0"!=r.preserveAspectRatio,L=(null===(a=r.height)||void 0===a?void 0:a.includes("px"))||i>=s;return Object.assign(f,{color:"transparent","font-size":`${L?i:Math.max(i,2*s)}px`,"background-size":O?"contain":`${s}px ${i}px`,"background-image":`url(data:${getImageType(n)};base64,${n})`}),is_safari||(f["background-repeat"]="no-repeat")," ".repeat(i<=s?2*Math.round(s/i):1)}function convertEscapeSequences(f){var e;let $=[];requires_console_monsospace_font&&(f="%c"+f,$.push(getDefaultStyle()));let o=0;f=(f=f.replace(color_image_esc_seq,(f,e,o)=>{let a=e||o?null==e?void 0:e.split(";").map(Number):[0],c=$.length?Object.assign({},$[$.length-1]):getDefaultStyle();if($.push(c),o)return"%c"+parseImage(c,o);{let d=100;for(;(null==a?void 0:a.length)&&d--;)parseEscSequence(c,a);return"%c"}})).replace(multiple_cs,f=>{let e=f.length/2;return e>1&&$.splice(o,e-1),o++,"%c"});let a=[];for(let c of $){let d=!!c["-x-invert"],r=!!c["-x-conceal"];delete c["-x-invert"],delete c["-x-conceal"],r&&(c.color="transparent"),d&&(c.color||(c.color="black"),(null===(e=c["text-decoration"])||void 0===e?void 0:e.includes("underline"))&&(c["text-decoration"]=c["text-decoration"].replace("underline",""))),a.push(Object.entries(c).map(([f,e])=>(d&&"background-color"==f?f="color":d&&"color"==f&&(f="background-color"),e.trim()?`${f}:${e}`:"")).join(";"))}return[f,...a]}function getLogMethodWithEscSeq(f){return(...e)=>{"string"==typeof e[0]&&e.splice(0,1,...convertEscapeSequences(e[0])),f(...e)}}export const console={log:getLogMethodWithEscSeq(globalThis.console.log),error:getLogMethodWithEscSeq(globalThis.console.error),warn:getLogMethodWithEscSeq(globalThis.console.warn),debug:getLogMethodWithEscSeq(globalThis.console.debug)};function enable(){globalThis.console.log=console.log,globalThis.console.error=console.error,globalThis.console.warn=console.warn,globalThis.console.debug=console.debug}export function enableMinimal(){ansi_escape_codes_basic_support||enable()}export function enableFullSupport(){ansi_escape_codes_full_support||enable()}